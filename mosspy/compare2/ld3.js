require=function s(o,r,c){function l(t,e){if(!r[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var n=r[t]={exports:{}};o[t][0].call(n.exports,function(e){return l(o[t][1][e]||e)},n,n.exports,s,o,r,c)}return r[t].exports}for(var h="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({AutoPlane:[function(e,t,i){"use strict";cc._RF.push(t,"e56bfzvqbJKmrS4snpd1NcB","AutoPlane"),cc.Class({extends:cc.Component,properties:{},exeDie:function(e){if(e)this.clrSprite();else{this.isAddScore&&(this.isBoss?BattleData.score.change(20):BattleData.score.change(1),this.isAddScore=!1),playPlaneExplode(this),this.isBoss?MusicManager.play("sound/bomb_boss"):MusicManager.play("sound/bomb_zabing");var t=1;this.isBoss&&(t=20);for(var i=0;i<t;i++)if(Math.random()<.5){var a=poolManager.getNode("zhanchang/buff10");(n=this.node.getPosition()).x+=RandInt(-50,50),n.y+=RandInt(-50,50),a.setPosition(n),a.parent=this.node.parent,a.curjs.init(),a.setLocalZOrder(2)}t=1,this.isBoss&&(t=5);for(i=0;i<t;i++)if(Math.random()<.02){var n;a=poolManager.getNode("zhanchang/buff09");(n=this.node.getPosition()).x+=RandInt(-50,50),n.y+=RandInt(-50,50),a.setPosition(n),a.parent=this.node.parent,a.curjs.init(),a.setLocalZOrder(2)}this.clrSprite()}},onCollisionExit:function(e,t){!this.laster_hit||!0!==e.node.laster&&!0!==e.node.lightning||(this.laster_hit.active=!1)},onCollisionStay:function(e,t){!0!==e.node.laster&&!0!==e.node.lightning||((this.lasterCool2===this.lasterCool||this.lasterCool2>this.lasterCool)&&(!0===e.node.lightning&&this.lightningAni.play(),this.life-=e.node.atk,this.lasterCool2=0,this.life<=0&&this.exeDie()),this.laster_hit.active=!0,this.laster_hit.rotation=e.node.rotation-this.node.rotation,this.laster_hit.y=(e.node.x-this.node.x)/1.5,this.laster_hit.x=0)},onCollisionEnter:function(e,t){if(this.lived){if(this.isMy)return;if(!0===e.node.laster||!0===e.node.lightning){var i="zhanchang/laster_hit";!0===e.node.lightning&&(i="zhanchang/light_hit"),this.laster_hit=poolManager.getNode(i),this.laster_hit.parent=this.node,this.laster_hit.rotation=e.node.rotation-this.node.rotation,!0===e.node.lightning&&(this.lightningAni=this.laster_hit.getComponent(cc.Animation),this.lightningAni.on("finished",function(){this.laster_hit.active=!1},this),this.laster_hit.active=!1),this.lasterCool=e.node.cool}else{var a=e.node.curjs;a.lived&&(a.isLaster||(a.life-=this.atk,a.life<=0&&a.exeDie()),this.life-=a.atk)}this.life<=0&&this.exeDie()}},runMoveTime:function(e){void 0!==this.pathCur&&this.pathCur.updateFunc(e)},parsePath:function(){var e=this.pathCur=this.route[this.pathDex],n=this;switch(e[0]){case cbPlanEvent.stop:(e.t=0)!=e[2]&&(e[1]*=Math.random()),e.updateFunc=function(e){0!==this.x&&(this.t+=e,this.t>=this.x&&(++n.pathDex,n.parsePath()))};break;case cbPlanEvent.moveby:e.moveDirection=cc.pNormalize(cc.p(e[1],e[2])),e.cxy=Math.abs(e[1])+Math.abs(e[2]),e.updateFunc=function(e){var t=n.moveSpeed*e,i=this.moveDirection.x*t,a=this.moveDirection.y*t;this.cxy-=Math.abs(i)+Math.abs(a),this.cxy<=0?(n.pathDex++,n.parsePath()):(n.node.x+=i,n.node.y+=a)};break;case cbPlanEvent.repeat:-1===e[1]?this.pathDex=e[2]:(--e[1],0===e[1]?this.pathDex++:this.pathDex=e[2]),this.parsePath();break;case cbPlanEvent.remove:this.isAddScore=!1,this.exeDie(!0);break;case cbPlanEvent.moveto:e[1]=e[1]-this.node.x,e[2]=e[2]-this.node.y,e.moveDirection=cc.pNormalize(cc.p(e[1],e[2])),e.cxy=Math.abs(e[1])+Math.abs(e[2]),e.updateFunc=function(e){var t=n.moveSpeed*e,i=this.moveDirection.x*t,a=this.moveDirection.y*t;this.cxy-=Math.abs(i)+Math.abs(a),this.cxy<=0?(n.pathDex++,n.parsePath()):(n.node.x+=i,n.node.y+=a)}}},preInit:function(){},init:function(){this.preInit(),this.isPlane=!0,this.bulletBaseAngle=0;var e=this.node.dd;this.isMy=e.isMy,this.isBoss=e.isBoss,this.node.group=this.isMy?"zj":"dj";var t=e.rotation;void 0===e.rotation&&(t=e.isMy?-90:90),this.node.rotation=t;var i=e.planeCfg;this.type=i.type,this.curDex=0,this.atk=i.damage,this.bulletAtk=i.atk,this.life=i.life*BattleData.loopAdd,this.lifeCount=this.life,this.moveSpeed=i.speed,this.isBoss&&(this.times=i.times,this.interval=i.interval),e.isMy||(this.isAddScore=!0),this.px=[],this.py=[],this.angle=[];for(var a=0;a<i.angle.length;++a)this.px[a]=i.px[a],this.py[a]=i.py[a],this.angle[a]=i.angle[a];this.cool=i.cool,this.cool2=i.coolupper,this.prefabzd=i.prefabzd,this.bulletSpeed=i.speed+i.bulletspeed,this.lived=!0,this.isLaster&&this.updateLasterLv(GameData.planeLv),e.route&&(this.pathDex=0,this.route=clone(e.route.route),this.parsePath()),BattleData.addBattleSprite(this),this.isBoss&&(this.hp=this.node.getChildByName("hp")),this.lasterCool2=0},updateBossHpUi:function(e,t){var i=e/t*120;this.hp.height=i},updateLasterLv:function(e){var t=Math.floor(e/5);if(this.laster&&(this.laster.dex===t?t=-1:(this.laster.exeDie(!0),this.laster=null)),-1!==t){this.laster=poolManager.getNode("prefab/laser103"+t),this.laster.parent=this.node.parent,this.laster.dex=t,this.laster.x=this.node.x,this.laster.y=this.node.y;for(var i=0;i<this.weapons2.length;++i)if(this.weapons2[i]){this.laster.curjs.init(this.weapons2[i]);break}this.laster.curjs.setUseFastFrame(GameData.prop.fast.inUse,this.propBulletFrame)}var a=.5*Math.floor(e/5)+.5;this.laster.setScale(a),this.laster.curjs.updateLv(e)},onDestroy:function(){this.lived&&(this.lived=!1,BattleData.removeBattleSprite(this),this.laster&&(BattleData.removeBattleSprite(this.laster.curjs),this.laster=null))},clrSprite:function(){this.lived&&(this.lived=!1,this.isBoss&&(BattleData.bossExist=!1),this.laster&&(this.laster.curjs.exeDie(!0),this.laster=null),this.unschedule(this.callback),BattleData.removeBattleSprite(this),poolManager.putNode(this),this.laster_hit&&poolManager.putNode2(this.laster_hit))},onLoad:function(){this.node.curjs=this},onEnable:function(){this.lived||this.init()},shootCheck:function(e){if(this.isLaster)return this.laster.x=this.node.x,this.laster.y=this.node.y,void this.laster.curjs.exeUpdate(e);this.cool+=e;var t=this.cool2;!1!==this.isBoss&&void 0!==this.isBoss||(t=this.cool2/BattleData.loopShootAdd),this.cool>=t&&(this.cool=0,this.isBoss?this.continuousShoot():this.shoot(this.type,this.px,this.py,this.angle,this.prefabzd))},continuousShoot:function(){var e=this.type[this.curDex],t=this.px[this.curDex],i=this.py[this.curDex],a=this.angle[this.curDex],n=this.prefabzd[this.curDex],s=this.times[this.curDex],o=this.interval[this.curDex];this.callback=function(){this.shoot(e,t,i,a,n)},this.schedule(this.callback,o,s,.01),this.curDex==this.type.length-1?this.curDex=0:this.curDex++},shoot:function(e,t,i,a,n){if(1===e)for(var s=-this.node.rotation*cc.dwHudou,o=cc.pForAngle(s),r=cc.pPerp(o),c=cc.pToAngle(cc.p(BattleData.planex-this.node.x,BattleData.planey-this.node.y))*cc.dwDou,l=0;l<a.length;++l){s=(f=a[l]+c)*cc.dwHudou;var h=cc.pForAngle(s),d=t[l],p=i[l],u=o.x*p+r.x*d,g=o.y*p+r.y*d;(m=poolManager.getNode(n)).x=this.node.x+u,m.y=this.node.y+g,m.rotation=-f,m.parent=this.node.parent,m.curjs.init(this.bulletSpeed,this.bulletAtk,h,this.isMy),m.setLocalZOrder(2)}else{s=-this.node.rotation*cc.dwHudou,o=cc.pForAngle(s),r=cc.pPerp(o);2===e&&(this.bulletBaseAngle+=30);for(l=0;l<a.length;++l){var f,m;s=(f=a[l]-this.node.rotation+this.bulletBaseAngle)*cc.dwHudou,h=cc.pForAngle(s),d=t[l],p=i[l],u=o.x*p+r.x*d,g=o.y*p+r.y*d;(m=poolManager.getNode(n)).x=this.node.x+u,m.y=this.node.y+g,m.rotation=-f,m.parent=this.node.parent,m.curjs.init(this.bulletSpeed,this.bulletAtk,h,this.isMy),m.setLocalZOrder(2)}}},exeUpdate:function(e){this.runMoveTime(e),this.shootCheck(e),this.lasterCool2+=e,this.isBoss&&this.updateBossHpUi(this.life,this.lifeCount)}}),cc._RF.pop()},{}],BattleData:[function(e,t,i){"use strict";cc._RF.push(t,"4084dKIxVJJwr8dkRTfeEz6","BattleData"),t.exports=function(){window.BattleData=new function(){this.selectPass=new EncodeNum(0),this.gold=new EncodeNum(0),this.score=new EncodeNum(0),this.fwqlv=new EncodeNum(1),this.bossExist=!1,this.time=0,this.planex=0,this.planey=0,this.lifePercent=1,this.loopAdd=1,this.loopShootAdd=1,this.myPlaneSprite={},this.youPlaneSprite={},this.myMissileSprite={},this.youMissileSprite={},this.myBulletSprite={},this.youBulletSprite={},this.otherSprite={},this._battleDex=1e3,this.begin=function(){this.gold.set(0),this.score.set(0),this.fwqlv.set(1),this.time=0,this.planex=0,this.planey=0,this.lifePercent=1,this.loopAdd=1,this.loopShootAdd=1},this.end=function(){GameData.gold.change(this.gold.get(),!0),this.score.get()>GameData.score.get()&&(GameData.score.set(this.score.get(),!0),WxSdk.postUserRankInfoToCloudStorage([{key:"score1",value:GameData.score.get().toString()}])),NHttp.pushUserInfo("score",GameData.score.get(),function(e){console.log(e)})},this.allSprite=[this.youPlaneSprite,this.youMissileSprite,this.youBulletSprite,this.myPlaneSprite,this.myMissileSprite,this.myBulletSprite,this.otherSprite],this.destoryBattleSprite=function(){for(var e=this.allSprite,t=0;t<e.length;++t){var i=e[t];for(var a in i){var n=i[a];delete i[a],n.clrSprite()}}},this.updateBattle=function(e){this.time+=e;for(var t=this.allSprite,i=0;i<t.length;++i){var a=t[i];for(var n in a)a[n].exeUpdate(e)}},this.addBattleSprite=function(e){var t;e.node||cc.log("err addBattleSprite not node"),t=e.isPlane?e.isMy?this.myPlaneSprite:this.youPlaneSprite:e.isMissile?e.isMy?this.myMissileSprite:this.youMissileSprite:e.isBullet?e.isMy?this.myBulletSprite:this.youBulletSprite:this.otherSprite,e._idKey=this._battleDex++,t[e._idKey]=e},this.removeBattleSprite=function(e){delete(e.isPlane?e.isMy?this.myPlaneSprite:this.youPlaneSprite:e.isMissile?e.isMy?this.myMissileSprite:this.youMissileSprite:e.isBullet?e.isMy?this.myBulletSprite:this.youBulletSprite:this.otherSprite)[e._idKey]},this.getOnePlane=function(e){var t,i=e.isMy?this.youPlaneSprite:this.myPlaneSprite,a=e.node.x,n=e.node.y,s=null;for(var o in i)if(s&&0<s.node.y){var r=i[o].node.x,c=i[o].node.y-n,l=Math.abs(r-a);0<c&&l<t&&(s=i[o])}else s=i[o],t=Math.abs(s.node.x-a);return s},this.getOneMissile=function(e,t){var i=e.isMy?this.youMissileSprite:this.myMissileSprite,a=null,n=0;for(var s in i)if(a=i[s],n++===t)return a;return a},this.createPlane=function(e,t,i,a,n,s,o){var r=t.prefab||t.descData.prefab,c=poolManager.getNode(r);return c.dd={isBoss:s,isMy:e,planeCfg:t,planeLjCfg:i,planeDaodanCfg:a,isAuto:n,rotation:o},c}}},cc._RF.pop()},{}],BattleLayer:[function(e,t,i){"use strict";cc._RF.push(t,"9a53bDFASNC9KDoHkhXOZ12","BattleLayer"),cc.Class({extends:cc.Component,properties:{},initPause:function(){var e=cc.find("battle/menu/b1",this.node),t=this.node.getChildByName("pause");t.active=!1,e.on("click",function(){t.active=!0,GameSet.isPause=!0},this),t.getChildByName("btn_1").on("click",function(){cc.director.loadScene("main")},this),t.getChildByName("btn_2").on("click",function(){t.active=!1,GameSet.isPause=!1},this)},moveBkg:function(e){var t=this.bkg1,i=this.bkg2;t.y-=200*e,i.y-=200*e,(t.y<-1*t.height||t.y==-1*t.height)&&(t.y+=2*t.height),(i.y<-1*t.height||i.y==-1*t.height)&&(i.y+=2*t.height)},onGameEnd:function(){GameData.gold.change(BattleData.gold.get()),BattleData.end()},initResult:function(){var e=this.node.getChildByName("result");e.active=!1;var t=cc.find("list1/t2",e).getComponent(cc.Label),i=cc.find("list2/t2",e).getComponent(cc.Label),a=cc.find("list3/t2",e).getComponent(cc.Label);this.showResult=function(){t.string=BattleData.score.get(),i.string=BattleData.gold.get(),a.string=SecondToStr(BattleData.time),e.active=!0},e.getChildByName("b1").on("click",function(){WxSdk.shareToWx(function(){})},this),e.getChildByName("b2").on("click",function(){this.onGameEnd(),cc.director.loadScene("battle")},this),e.getChildByName("b3").on("click",function(){this.onGameEnd(),cc.director.loadScene("main")},this),this.node.on("gameOver",function(e){GameSet.isPause=!0,this.myPlane.curjs.exeDie(!0),this.showResult()},this)},initBattle:function(){BattleData.begin();var e=this.node.getChildByName("battle"),t=e.getChildByName("sprite");this.spriteNode=t,this.spriteNodeBg=e.getChildByName("battlebg"),this.touchNode=e.getChildByName("touchNode"),this.bkg1=this.spriteNodeBg.getChildByName("bg1"),this.bkg2=this.spriteNodeBg.getChildByName("bg2"),this.bkg2.y=this.bkg1.y+this.bkg1.height;var i=cc.find("gold/t",this.node).getComponent(cc.Label),a=cc.find("score/t",this.node).getComponent(cc.Label);i.string=0,a.string=0;var n=1,s=BattleData.createPlane(!0,GameSet.isFree?GameData.getMaxPlaneCfg():GameData.getPlaneData(),GameData.getPlaneLjData(),GameData.getPlaneDaodanData(),!1,!1);s.parent=t,s.x=0,s.y=GameSet.down-100,s.setLocalZOrder(3),GameSet.isPause=!0,cc.director.getCollisionManager().enabled=!0;var o=cc.find("battle/menu/hp/i",this.node);this.updateBattle=function(e){0<(n-=e)?this.myPlane.y+=100*e*2:(GameSet.isPause=!1,this.updateBattle=function(e){GameSet.isPause||(BattleData.updateBattle(e),this.updateEnemy(e),i.string=BattleData.gold.get(),a.string=BattleData.score.get(),o.scaleX=BattleData.lifePercent)})},this.myPlane=s,this.addTouch(),this.addEnemy(t)},onLoad:function(){this.initPause(),this.initBattle(),this.initResult()},start:function(){},update:function(e){this.updateBattle(e),this.moveBkg(e)},addTouch:function(){var e=this.touchNode;this.touchIds=[],e.on(cc.Node.EventType.TOUCH_START,function(e){this.touchIds.push(e.getID()),e.stopPropagationImmediate()},this);var a=this.spriteNodeBg,n=this.spriteNode;e.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(!GameSet.isPause){var t=e.getDelta().x,i=e.getDelta().y;this.myPlane.x+=t,this.myPlane.y+=i,this.myPlane.y<GameSet.down?this.myPlane.y=GameSet.down:500<this.myPlane.y&&(this.myPlane.y=500),t<0?(this.myPlane.x<-340&&(this.myPlane.x=-340),this.myPlane.x<150&&a.x<64&&(a.x-=.35*t,64<a.x&&(a.x=64),n.x=a.x)):(340<this.myPlane.x&&(this.myPlane.x=340),-150<this.myPlane.x&&-64<a.x&&(a.x-=.35*t,a.x<-64&&(a.x=-64),n.x=a.x)),BattleData.planex=this.myPlane.x,BattleData.planey=this.myPlane.y}},this),e.on(cc.Node.EventType.TOUCH_CANCEL,function(e){for(var t=e.getID(),i=0;i<this.touchIds.length;++i)if(this.touchIds[i]===t){this.touchIds.splice(i,1);break}},this),e.on(cc.Node.EventType.TOUCH_END,function(e){for(var t=e.getID(),i=0;i<this.touchIds.length;++i)if(this.touchIds[i]===t){this.touchIds.splice(i,1);break}},this)},onDisable:function(){BattleData.destoryBattleSprite()},openEndless:function(s){var o=0,r=0,c=0,l=1,h=GameData.cfgaryInfiniteMode.length-1;this.updateEnemy=function(e){for(c+=e*=(5+r)/5;;){var t=GameData.cfgaryInfiniteMode[o];if(c<t.t||BattleData.bossExist)break;if(74==o&&l%3!=0);else{var i=!1;74==o&&l%3==0&&(i=BattleData.bossExist=!0);var a=GameData.cfgmapautoPlane[t.plane],n=BattleData.createPlane(!1,a,void 0,void 0,!0,i);n.dd.route=GameData.cfgmapautoPlaneRoute[t.route],n.x=320*t.x,n.y=568*t.y,n.setLocalZOrder(3),n.parent=s}c=0,++o>h&&(o=0,t=GameData.cfgaryInfiniteMode[o],l++,r++,BattleData.loopAdd*=1.2,BattleData.loopShootAdd=1+r/10,5<BattleData.loopAdd&&(BattleData.loopAdd=5),1.8<BattleData.loopShootAdd&&(BattleData.loopShootAdd=1.8),console.log(r,"---",BattleData.loopAdd,"---",o,"---",BattleData.loopShootAdd)),74==o&&l%3==0&&this.waring()}}},waring:function(){var e=this.node.getChildByName("waring");e.active=!0;var t=e.getComponent(cc.Animation);t.on("finished",function(){e.active=!1},this),t.play(),MusicManager.play("sound/bosswaring",!1,1)},openGuanka:function(e){this.updateEnemy=function(e){}},addEnemy:function(e){GameSet.isEndless?this.openEndless(e):this.openGuanka(e)}}),cc._RF.pop()},{}],Buf:[function(e,t,i){"use strict";cc._RF.push(t,"de13bm4UYJNdb1c0n4fyUJa","Buf"),cc.Class({extends:cc.Component,properties:{nbuf:0},init:function(){this.life=10,this.moveSpeed=100,this.moveDistance=1200,this.isBuf=!0,this.node.targetDirection=cc.p(0,-1),BattleData.addBattleSprite(this),this.lived=!0},onDestroy:function(){this.lived&&(this.lived=!1,BattleData.removeBattleSprite(this))},clrSprite:function(){this.lived&&(this.lived=!1,BattleData.removeBattleSprite(this),poolManager.putNode(this))},onLoad:function(){this.node.curjs=this},exeDie:function(e){e||MusicManager.play("sound/pickup"),this.clrSprite()},onCollisionEnter:function(e,t){this.life<=0||(e.node.curjs.onBuf(this.nbuf),this.life=0,this.exeDie())},runMoveTime:function(e){if(this.moveDistance<=0)this.exeDie(!0);else{var t=this.moveSpeed*e;this.moveDistance-=t;var i=this.node.targetDirection;i&&(this.node.x+=i.x*t,this.node.y+=i.y*t)}},exeUpdate:function(e){this.runMoveTime(e)}}),cc._RF.pop()},{}],BulletSprite:[function(e,t,i){"use strict";cc._RF.push(t,"30e18am3RJGvZ3kF4UTg4+Q","BulletSprite"),cc.Class({extends:cc.Component,init:function(e,t,i,a){this.isMy=a,this.node.group=a?"zjzd":"djzd",this.atk=t,this.life=1,this.moveSpeed=e,this.moveDistance=1500,this.isBullet=!0,this.direction=i,this.lived=!0,BattleData.addBattleSprite(this)},setUseFastFrame:function(e,t){if(e){if(!this.cbnormalFrame){var i=this.node.getComponent(cc.Sprite);this.cbnormalFrame=i.spriteFrame,i.spriteFrame=t}}else this.cbnormalFrame&&((i=this.node.getComponent(cc.Sprite)).spriteFrame=this.cbnormalFrame,this.cbnormalFrame=void 0)},onDestroy:function(){this.lived&&(this.lived=!1,BattleData.removeBattleSprite(this))},clrSprite:function(){this.lived&&(this.lived=!1,BattleData.removeBattleSprite(this),poolManager.putNode(this))},exeDie:function(e){e||(!0===this.node.isIce?playIceBulletExplode(this):playBulletExplode(this)),this.clrSprite()},onLoad:function(){this.node.curjs=this},onCollisionEnter:function(e,t){if(this.lived){var i=e.node.curjs;i.lived&&(i.life-=this.atk,i.life<=0&&i.exeDie(),this.exeDie())}},runMoveTime:function(e){if(this.moveDistance<=0)this.exeDie(!0);else if(!1!==this.node.ready){var t=this.moveSpeed*e;this.moveDistance-=t,this.node.x+=this.direction.x*t,this.node.y+=this.direction.y*t}},onEnable:function(){var e=this.node.mX;this.node.runAction(cc.sequence(cc.moveBy(.5,e,0),cc.callFunc(function(){this.node.ready=!0},this)))},exeUpdate:function(e){this.runMoveTime(e)}}),cc._RF.pop()},{}],GameData:[function(e,t,i){"use strict";cc._RF.push(t,"8b2b0i86vZMzbPgqAPy5pAg","GameData"),t.exports=function(){window.GameData=new function(){this.score=new LocalNum("score",0),this.gold=new LocalNum("gold",GameSet.isTest?1e6:100),this.passsuc=new LocalNum("pass",0);var r=GameSet.isTest?10:1;this.planeDaodanSelect=new LocalNum("planeDaodanSelect",0);var c=[];this.getMaxPlaneDaodanCfg=function(e){var t=this.getPlaneDaodanData(e);return BattleData.fwqlv.set(t.maxlv),t},this.getPlaneDaodanData=function(e){return void 0===e&&(e=this.planeDaodanSelect.get()),c[e]};this.planeLjSelect=new LocalNum("planeLjSelect",0);var l=[];this.getMaxPlaneLjCfg=function(e){var t=l[e],i={};i.descData=t.descData;var a=t.lvcfgAry[t.lvcfgAry.length-1];return i.atk=a.atk,i.frequency=a.frequency,i.angle=a.angle,i.cost=a.cost,i.px=a.px,i.py=a.py,i},this.getPlaneLjData=function(e){return void 0===e&&(e=this.planeLjSelect.get()),l[e]};var h=function(e){var t=l[e];if(t){var i=t.lvcfgAry[t.lv.get()];i?(t.atk=i.atk,t.frequency=i.frequency,t.angle=i.angle,t.cost=i.cost,t.px=i.px,t.py=i.py):console.log("err updatePlaneRealData atklv:"+t.lv.get())}else console.log("err updatePlaneRealData:"+e)};this.upPlaneLj=function(e,t){var i=l[e];return i.lv.get()>=i.maxlv?2:this.gold.get()<i.cost?1:(t||(this.gold.change(-i.cost,!0),i.lv.change(1,!0),h(e)),0)},this.planeSelect=new LocalNum("planeSelect",0);var d=[];this.getMaxPlaneCfg=function(e){void 0===e&&(e=this.planeSelect.get());var t=d[e],i={};i.descData=t.descData;var a=t.lvcfgAry[t.lvcfgAry.length-1];return i.atk=a.atk,i.type=a.type,i.atkup=a.cost,i.life=a.life,i.lifeup=a.cost,i.frequency=a.frequency,i.angle=a.angle,i.px=a.px,i.py=a.py,i.speed=a.speed,i.damage=a.damage,i.bulletspeed=a.bulletspeed,i};var p=function(e){var t=d[e];if(t){var i=t.lvcfgAry,a=i[t.atklv.get()];a?(t.atk=a.atk,t.type=a.type,t.atkup=a.cost,(a=i[t.lifelv.get()])?(t.life=a.life,t.lifeup=a.cost,(a=i[t.frequencylv.get()])?(6===e&&(t.reduce=a.reduce),t.frequency=a.frequency,t.angle=a.angle,t.px=a.px,t.py=a.py,t.frequencyup=a.cost,t.speed=a.speed,t.damage=a.damage,t.bulletspeed=a.bulletspeed):console.log("err updatePlaneRealData frequency:"+t.frequencylv.get())):console.log("err updatePlaneRealData lifelv:"+t.lifelv.get())):console.log("err updatePlaneRealData atklv:"+t.atklv.get())}else console.log("err updatePlaneRealData:"+e)};this.upPlaneAtk=function(e,t){var i=d[e];return 1===i.own.get()?i.atklv.get()>=i.maxlv?2:this.gold.get()<i.atkup?1:t?0:(this.gold.change(-i.atkup,!0),i.atklv.change(1,!0),p(e),!0):3},this.upPlaneLife=function(e,t){var i=d[e];return 1===i.own.get()?i.lifelv.get()>=i.maxlv?2:this.gold.get()<i.lifeup?1:(t||(this.gold.change(-i.lifeup,!0),i.lifelv.change(1,!0),p(e)),0):3},this.upPlaneFrequency=function(e,t){var i=d[e];return 1===i.own.get()?i.frequencylv.get()>=i.maxlv?2:this.gold.get()<i.frequencyup?1:(t||(this.gold.change(-i.frequencyup,!0),i.frequencylv.change(1,!0),p(e)),0):3},this.getPlaneData=function(e){return void 0===e&&(e=this.planeSelect.get()),d[e]},this.onResourcesDirLoaded=function(){this.cfgaryautoPlane=cc.loader.getRes("config/autoPlane.json"),this.cfgaryautoPlaneRoute=cc.loader.getRes("config/autoPlaneRoute.json"),this.cfgaryplayerfuwuqi=cc.loader.getRes("config/playerfuwuqi.json"),this.cfgaryplayerfuwuqiDesc=cc.loader.getRes("config/playerfuwuqides.json"),this.cfgaryplayerliaoji=cc.loader.getRes("config/playerliaoji.json"),this.cfgaryplayerliaojiDesc=cc.loader.getRes("config/playerliaojides.json"),this.cfgaryplayerPlane=cc.loader.getRes("config/playerPlane.json"),this.cfgaryplayerPlaneDesc=cc.loader.getRes("config/playerPlanedes.json"),this.cfgaryInfiniteMode=cc.loader.getRes("config/InfiniteMode.json"),this.cfgaryStageMode=cc.loader.getRes("config/stageMode.json"),this.cfgmapautoPlane=cbConfigToMap("id",this.cfgaryautoPlane,["px","py","angle"]),this.cfgmapautoPlaneRoute=cbConfigToMap("id",this.cfgaryautoPlaneRoute,["route"]),this.cfgmapplayerfuwuqi=cbConfigToMap("id",this.cfgaryplayerfuwuqi,["px","py","angle"]),this.cfgmapplayerliaoji=cbConfigToMap("id",this.cfgaryplayerliaoji,["px","py","angle"]),this.cfgmapplayerPlane=cbConfigToMap("id",this.cfgaryplayerPlane,["px","py","angle"]),this.cfgmapInfiniteMode=cbConfigToMap("id",this.cfgaryInfiniteMode),this.cfgmapStageMode=cbConfigToMap("id",this.cfgaryStageMode),function(e,t){for(var i=0;i<t.length;++i){var a={};d.push(a),a.own=new LocalNum("planeown_"+i,i<r?1:0),a.atklv=new LocalNum("planeatklv_"+i,1),a.lifelv=new LocalNum("planelifelv"+i,1),a.frequencylv=new LocalNum("planefrequencylv"+i,1),a.descData=t[i],a.lvcfgAry=[null];for(var n=a.descData.id,s=0;s<100;++s){var o=e[n+s];if(!o){a.maxlv=s;break}a.lvcfgAry.push(o)}p(i)}}(this.cfgmapplayerPlane,this.cfgaryplayerPlaneDesc),function(e,t){for(var i=0;i<t.length;++i){var a={};l.push(a),a.own=new LocalNum("planeljown_"+i,i<r?1:0),a.lv=new LocalNum("planeljlv_"+i,1),a.descData=t[i],a.lvcfgAry=[null];for(var n=a.descData.id,s=0;s<100;++s){var o=e[n+s];if(!o){a.maxlv=s;break}a.lvcfgAry.push(o)}h(i)}}(this.cfgmapplayerliaoji,this.cfgaryplayerliaojiDesc),function(e,t){for(var i=0;i<t.length;++i){var a={};c.push(a),a.own=new LocalNum("planefwqown_"+i,i<r?1:0),a.descData=t[i],a.lvcfgAry=[null];for(var n=a.descData.id,s=0;s<100;++s){var o=e[n+s];if(!o){a.maxlv=s;break}a.lvcfgAry.push(o)}}}(this.cfgmapplayerfuwuqi,this.cfgaryplayerfuwuqiDesc)}}},cc._RF.pop()},{}],GameSet:[function(e,t,i){"use strict";cc._RF.push(t,"92a23NbIsNDyY6Be2Y4g/mc","GameSet"),t.exports=function(){window.GameSet={userInfo:null,appid:"wx5d96a97b52e3b224",appname:"雷电3",appDesc:"",shopRewardVideoGold:1e3,reviveGold:800,propBombPrice:400,propShieldPrice:400,propFastPrice:400,shareFriendRewardGold:500,down:-568,isEndless:!0,isTest:!1,isFree:!0},window.gameSize=function(){var e={width:640,height:1136},t={width:cc.sys.windowPixelResolution.width,height:cc.sys.windowPixelResolution.height};if(e.width<e.height&&t.width>t.height||e.height<e.width&&t.width<t.height){var i=t.width;t.width=t.height,t.height=i}console.log(t.width,t.height);var a;return a=e.width/t.width,t.height=t.height*a,t.width=e.width,{def:e,rel:t,scale:a}}()},cc._RF.pop()},{}],GlobalHead:[function(e,t,i){"use strict";cc._RF.push(t,"4f0f6Bda+9P649CrklopyGy","GlobalHead"),t.exports=function(){cc.dwHudou=Math.PI/180,cc.dwDou=180/Math.PI,window.cbPlanEvent={stop:0,moveby:1,repeat:3,remove:4,moveto:5},e("GameSet")(),e("MusicManager")(),e("Help")(),e("Http")(),e("LocalNum")(),e("GameData")(),e("WxSdk")(),e("SubdomainSender")(),e("PoolManager")(),e("BattleData")()},cc._RF.pop()},{BattleData:"BattleData",GameData:"GameData",GameSet:"GameSet",Help:"Help",Http:"Http",LocalNum:"LocalNum",MusicManager:"MusicManager",PoolManager:"PoolManager",SubdomainSender:"SubdomainSender",WxSdk:"WxSdk"}],Help:[function(e,t,i){"use strict";cc._RF.push(t,"27566K23CVA1LPqlpN1G0jw","Help"),t.exports=function(){Math.seed=function(e){var t=e,i=987654321,a=4294967295;return function(){var e=((i=36969*(65535&i)+(i>>16)&a)<<16)+(t=18e3*(65535&t)+(t>>16)&a)&a;return(e/=4294967296)+.5}},window.SecondToStr=function(e){var t="",i=(e=Math.floor(100*e))%100;e-=i;var a=(e/=100)%60;e-=a;var n=(e/=60)%60;return t+=n<10?"0"+n:n,t+=":",t+=a<10?"0"+a:a,t+=":",t+=i<10?"0"+i:i},window.cbPForAngle=function(e){return cc.pForAngle(Math.PI*e/180)},window.RandInt=function(e,t){return Math.floor(e+(t-e)*Math.random())},window.clone=function(e){if(e instanceof Object){var t=e instanceof Array?[]:{};for(var i in e)t[i]=clone(e[i]);return t}return e},window.cbConfigToMap=function(t,i,a){var e={};try{for(var n=0;n<i.length;++n){var s=i[n];if(a)for(var o=0;o<a.length;++o){var r=a[o];s[r]&&(s[r]=JSON.parse(s[r]))}e[s[t]]=s}}catch(e){console.log("EEEEEEEEEEE",e,"---",t,"---",i,"---",a)}return e},window.playIceBulletExplode=function(e){var t=poolManager.getNode("zhanchang/ani_ice_boom");t.rotation=-90,t.x=e.node.x,t.y=e.node.y,t.setLocalZOrder(2),t.parent=e.node.parent},window.playBulletExplode=function(e){var t=poolManager.getNode("zhanchang/ani_bullet_bomb");t.x=e.node.x,t.y=e.node.y,t.setLocalZOrder(2),t.parent=e.node.parent},window.playPlaneExplode=function(e){var t=poolManager.getNode("zhanchang/ani_boss_bomb");t.x=e.node.x,t.y=e.node.y,t.setLocalZOrder(2),t.parent=e.node.parent},window.playMissileExplode=function(e){var t=poolManager.getNode("zhanchang/ani_missile_bomb");t.x=e.node.x,t.y=e.node.y,t.setLocalZOrder(2),t.parent=e.node.parent},window.playLaserExplode=function(e,t){},window.showTishi=function(e){var t=poolManager.getNode("tishi/tishi");t.parent=cc.director.getScene(),t.curjs.setString(e),MusicManager.play("sound/tips")}},cc._RF.pop()},{}],Http:[function(e,t,i){"use strict";cc._RF.push(t,"cbc3fZrGv5GcIrYpboOWcqs","Http"),t.exports=function(){window.NHttp={},NHttp.addrList={login:"/user/v1/login",pushUserInfo:"/user/v1/pushUserInfo",getRank:"/user/v1/getRank",getAppPageList:"/activity/v1/getAppPageList",getAppHotList:"/activity/v1/getAppHotList",getAppShareInfo:"/activity/v1/getAppShareInfo",getTaskStatus:"/activity/v1/getTaskStatus",ip:"https://520poker.com"},NHttp.getTaskStatus=function(e,t){var i=this.addrList.ip+this.addrList.getTaskStatus,a={ids:e};this.connet(i,a,t,"Bearer "+NHttp.token,"获取任务状态")},NHttp.getAppShareInfo=function(e){var t=this.addrList.ip+this.addrList.getAppShareInfo,i={app:GameSet.appid};this.connet(t,i,e,void 0,"获取分享列表")},NHttp.getAppHotList=function(e){var t=this.addrList.ip+this.addrList.getAppHotList;this.connet(t,{},e,void 0,"获取游戏推荐列表")},NHttp.getAppPageList=function(e){var t=this.addrList.ip+this.addrList.getAppPageList;this.connet(t,{},e,void 0,"获取游戏页列表")},NHttp.getRank=function(e,t){var i=this.addrList.ip+this.addrList.getRank,a={app:GameSet.appid,page:e};this.connet(i,a,t,"Bearer "+NHttp.token,"获取排行榜")},NHttp.pushUserInfo=function(e,t,i,a){var n=this.addrList.ip+this.addrList.pushUserInfo,s={key:e,adj:t};s.delta=!!a,this.connet(n,s,i,"Bearer "+NHttp.token,"上传用户信息")},NHttp.loginT=0,NHttp.login=function(a){if(GameSet.userInfo){var e=Date.now();if(e-NHttp.loginT<36e5)console.log("不用登录");else{NHttp.loginT=e;var t=this.addrList.ip+this.addrList.login,i=GameSet.userInfo.code,n=GameSet.userInfo.nickName,s=GameSet.userInfo.avatarUrl,o=GameSet.userInfo.gender,r={jscode:i,app:GameSet.appid,nick:n,avatar:s,gender:1===o};if(GameSet.query){var c=GameSet.query.a;c&&(r.tnote=c);var l=GameSet.query.b;l&&(r.tcode=Number(l))}this.connet(t,r,function(e,t){if(e){var i=poolManager.getNode("prefab/tishi");return i.parent=cc.director.getScene(),void i.curjs.setString(e)}NHttp.uuid=t.uuid,NHttp.token=t.token,a(e,t)},void 0,"登录")}}else console.log("不用登录 GameSet.userInfo 不存在 ")},NHttp.connet=function(e,i,a,t,n){var s=new XMLHttpRequest;s.timeout=1e5,s.open("POST",e),s.setRequestHeader("Content-Type","text/plain;");var o=JSON.stringify(i);console.log("http 请求 "+n+":"),console.log("地址:"+e),console.log("发送数据:"+o),console.log(""),t&&s.setRequestHeader("Authorization",t),s.send(o);s.onerror=function(e){console.log("http 收到"+n+"返回失败,"+e),a(n+",onerror:"+e,i)},s.onreadystatechange=function(){if(4===s.readyState){console.log("xhr.status",s.status);var e=s.response;if(200<=s.status&&s.status<300){console.log("http "+n+"成功:",e);var t=JSON.parse(e);a(void 0,t)}else console.log("http "+n+"返回错误:",e),a(n+"失败,code:"+s.status,i)}}}},cc._RF.pop()},{}],Laster:[function(e,t,i){"use strict";cc._RF.push(t,"853f7TNPnpEfIBQWDdGqz0+","Laster"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){(this.node.curjs=this).node.group="zjzd"},playAni:function(){this.node.lightning||this.node.laster&&(this.laster_root=this.node.getChildByName("laster_root"),this.laster_root.scaleX=1,this.callback=function(){this.laster_root.scaleY*=-1},this.schedule(this.callback,.2))},start:function(){},onEnable:function(){this.node.cool2=this.node.cool,this.shootLaster(),this.playAni()},shootLaster:function(){this.node.lightning?(this.column=this.node,this.column.width=0,this.callback2=function(){this.column.width+=10,1212<this.column.width&&(this.column.width=1212,this.unschedule(this.callback2))}):this.node.laster&&(this.column=this.node.getChildByName("laster_column"),this.laster_hand=this.node.getChildByName("hand"),this.column.width=0,this.laster_hand.x=115,this.callback2=function(){this.column.width+=30,this.laster_hand.x+=30,1212<this.column.width&&(this.column.width=1212,this.laster_hand.x=1327,this.unschedule(this.callback2))}),this.callback2&&this.schedule(this.callback2,.001,1111,1e-4)},onDisable:function(){this.unschedule(this.callback)},exeUpdate:function(e){this.node.cool2+=e}}),cc._RF.pop()},{}],LevelUpLayer:[function(e,t,i){"use strict";cc._RF.push(t,"4c3663Zs3tCU6mQt64tFRkO","LevelUpLayer"),cc.Class({extends:cc.Component,properties:{_selPage:0},selectLayer:function(e,t){this.showLayer(Number(t))},onEnable:function(){},onDisable:function(){},initPlane:function(e){var y=this,S=e.getChildByName("t1").getComponent(cc.Label),x=e.getChildByName("t2").getComponent(cc.Label),b=e.getChildByName("n0"),w=e.getChildByName("n1"),B=e.getChildByName("n2"),D=b.getChildByName("t2"),C=w.getChildByName("t2"),k=B.getChildByName("t2"),P=b.getChildByName("b"),N=w.getChildByName("b"),M=B.getChildByName("b"),L=P.getChildByName("t"),_=N.getChildByName("t"),F=M.getChildByName("t"),R=e.getChildByName("n3"),G=GameData.planeSelect.get(),I=e.getChildByName("b1");I.active=!1;var A=e.getChildByName("b2"),j=GameData.cfgaryplayerPlaneDesc.length-1,T=e.getChildByName("plane"),t=function e(){BattleData.destoryBattleSprite(),T.removeAllChildren();var t=2===GameData.upPlaneAtk(G,!0);P.active=!t;var i=2===GameData.upPlaneLife(G,!0);N.active=!i;var a=2===GameData.upPlaneFrequency(G,!0);M.active=!a;var n=GameData.planeLjSelect.get(),s=GameData.planeDaodanSelect.get(),o=BattleData.createPlane(!0,GameData.getMaxPlaneCfg(G),GameData.getMaxPlaneLjCfg(n),GameData.getMaxPlaneDaodanCfg(s),!1,!1);o.parent=T,o.x=0,o.y=-100,o.setLocalZOrder(3),o;var r=GameData.getPlaneData(G);S.string=r.descData.name,x.string=r.descData.describe,I.active=0!==G,A.active=G!==j;var c=1===r.own.get();b.active=!0,w.active=!0,B.active=!0,y.funcBtn.active=!0;var l=y.funcBtn.getChildByName("i2"),h=y.funcBtn.getChildByName("i3"),d=y.funcBtn.getChildByName("i4"),p=y.funcBtn.getChildByName("i5");c?(l.active=!1,p.active=!1,h.active=!0,y.funcCall=function(){GameData.planeSelect.set(G),showTishi("战机已出战"),e()}):GameSet.isFree?(l.active=!1,p.active=!0,h.active=!1,y.funcCall=function(){GameData.planeSelect.set(G),showTishi("战机已出战"),e()}):(p.active=!1,l.active=!0,h.active=!1,y.funcCall=function(){r.own.set(1),showTishi("战机已解锁"),e()}),d.active=!1,GameData.planeSelect.get()===G&&(l.active=!1,h.active=!1,p.active=!1,d.active=!0),D.getComponent(cc.Label).string="Lv."+r.atklv.get(),C.getComponent(cc.Label).string="Lv."+r.lifelv.get(),k.getComponent(cc.Label).string="Lv."+r.frequencylv.get(),L.getComponent(cc.Label).string=r.atkup,_.getComponent(cc.Label).string=r.lifeup,F.getComponent(cc.Label).string=r.frequencyup;for(var u=r.descData.num.toString(),g=1;g<=3;++g)for(var f=R.getChildByName("l"+g),m=Number(u[g-1]),v=0;v<5;++v){f.getChildByName("i"+v).active=v<m}};this.showPlane=function(e){e?t():(BattleData.destoryBattleSprite(),T.removeAllChildren(),null)},P.on("click",function(){3==GameData.upPlaneAtk(G)&&showTishi("尚未拥有该战机"),t()},this),N.on("click",function(){3==GameData.upPlaneLife(G)&&showTishi("尚未拥有该战机"),t()},this),M.on("click",function(){3==GameData.upPlaneFrequency(G)&&showTishi("尚未拥有该战机"),t()},this),I.on("click",function(){--G,t()},this),A.on("click",function(){++G,t()},this),this.updatePlane=function(e){BattleData.updateBattle(e)}},initLj:function(e){var l=this,s=e.getChildByName("t1"),o=e.getChildByName("t2"),r=e.getChildByName("mj"),c=e.getChildByName("i2"),h=e.getChildByName("t3"),d=e.getChildByName("b1"),p=function(e){var t=GameData.getPlaneLjData(e),i=1===t.own.get(),a=2===GameData.upPlaneLj(e,!0),n=i&&!a;d.active=n,h.active=n,c.active=n,h.getComponent(cc.Label).string=t.cost,s.getComponent(cc.Label).string=t.descData.name,o.getComponent(cc.Label).string=t.descData.describe,r.active=a};d.on("click",function(){GameData.upPlaneLj(GameData.planeLjSelect.get()),p(GameData.planeLjSelect.get())},this);for(var t=e.getChildByName("scroll"),i=t.getChildByName("item"),a=t.getChildByName("content"),u=[],g=-1,n=function e(t){var i=t.dd,a=t.dex;if(a!==g){var n=1===i.own.get();(n||GameSet.isFree)&&GameData.planeLjSelect.set(a),l.funcBtn.active=!0;var s=l.funcBtn.getChildByName("i2"),o=l.funcBtn.getChildByName("i3"),r=l.funcBtn.getChildByName("i4"),c=l.funcBtn.getChildByName("i5");s.active=!0,o.active=!1,r.active=!1,c.active=!1,(GameSet.isFree||n)&&(l.funcBtn.active=!1),l.funcCall=function(){i.own.set(1),showTishi("僚机已解锁"),e(t)},-1!==g&&(u[g].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("images/label_levelup_item_nor.png"))),g=a,t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("images/label_levelup_item_sel.png")),p(a)}},f=0;;++f){var m=GameData.getPlaneLjData(f);if(!m)break;var v=cc.loader.getRes("images/"+m.descData.icon1),y=cc.instantiate(i);u.push(y),y.getChildByName("i").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(v),a.addChild(y);var S=cc.loader.getRes("images/label_levelup_item_nor.png");y.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(S),y.dd=m,y.dex=f,y.on(cc.Node.EventType.TOUCH_START,function(e){n(e.target)},this)}i.active=!1,this.showPlaneLjPage=function(){n(u[GameData.planeLjSelect.get()])}},initDaodan:function(e){for(var l=this,h=e.getChildByName("t1"),d=e.getChildByName("t2"),p=e.getChildByName("i3"),t=e.getChildByName("scroll"),i=t.getChildByName("item"),a=t.getChildByName("content"),u=[],g=-1,n=function e(t){var i=t.dd,a=t.dex;if(a!==g){var n=1===i.own.get();(n||GameSet.isFree)&&GameData.planeDaodanSelect.set(a);var s=l.funcBtn.getChildByName("i2"),o=l.funcBtn.getChildByName("i3"),r=l.funcBtn.getChildByName("i4"),c=l.funcBtn.getChildByName("i5");l.funcBtn.active=!0,s.active=!0,o.active=!1,r.active=!1,c.active=!1,(GameSet.isFree||n)&&(l.funcBtn.active=!1),l.funcCall=function(){i.own.set(1),showTishi("导弹已解锁"),e(t)},-1!==g&&(u[g].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("images/label_levelup_item_nor.png"))),g=a,t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("images/label_levelup_item_sel.png")),function(e){var t=GameData.getMaxPlaneDaodanCfg(e);t.own.get();h.getComponent(cc.Label).string=t.descData.name,d.getComponent(cc.Label).string=t.descData.describe,p.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("zhanchang/res/"+t.descData.icon2))}(a)}},s=0;;++s){var o=GameData.getPlaneDaodanData(s);if(!o)break;var r=cc.loader.getRes("images/"+o.descData.icon1),c=cc.instantiate(i);u.push(c),c.getChildByName("i").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(r),a.addChild(c);var f=cc.loader.getRes("images/label_levelup_item_nor.png");c.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(f),c.dd=o,c.dex=s,c.on(cc.Node.EventType.TOUCH_START,function(e){n(e.target)},this)}i.active=!1,this.showPlaneDdPage=function(){n(u[GameData.planeDaodanSelect.get()])}},onLoad:function(){var e=[];e[0]=cc.find("n/p1",this.node),e[1]=cc.find("n/p2",this.node),e[2]=cc.find("n/p3",this.node),this.labGold=cc.find("gold/t",this.node).getComponent(cc.Label),cc.find("n/b1",this.node).on("click",function(){this.node.active=!1},this),this.funcBtn=cc.find("n/b2",this.node),this.funcCall=null,this.funcBtn.on("click",function(){this.funcCall&&this.funcCall()},this),this.initPlane(e[0]),this.initLj(e[1]),this.initDaodan(e[2]),this.pageLayers=e,this.showLayer(0)},showLayer:function(e){this._selPage=e;for(var t=this.pageLayers,i=0;i<t.length;++i)t[i].active=e===i;0===e?this.showPlane(!0):1===e?(this.showPlane(!1),this.showPlaneLjPage()):2===e&&(this.showPlane(!1),this.showPlaneDdPage())},start:function(){},update:function(e){this.updatePlane(e),this.labGold.string=GameData.gold.get()}}),cc._RF.pop()},{}],LocalNum:[function(e,t,i){"use strict";cc._RF.push(t,"e007baQ0RFGAKDlJAl7OsW2","LocalNum"),t.exports=function(){window.EncodeNum=function(t){var i,a;this.set=function(e){i=2*(e-73),a=e},this.get=function(){var e=i/2+73;return e===a?e:(this.set(t),t)},this.change=function(e){this.set(this.get()+e)}},window.LocalNum=function(i,a){var n,s;a=a||0,this.set=function(e,t){n=2*(e-73),s=e,(t||void 0===t)&&this.write()},this.get=function(e){var t=n/2+73;return e?t:t===s?t:(this.set(a),a)},this.change=function(e,t){this.set(this.get()+e,t)},this.read=function(){var e=cc.sys.localStorage.getItem(i),t=Number(e);e&&t?(n=t,s=this.get(!0)):this.set(a)},this.write=function(){cc.sys.localStorage.setItem(i,n)},this.read()}},cc._RF.pop()},{}],Main:[function(e,t,i){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","Main");var c=cc.Class({extends:cc.Component,properties:{},initUi:function(){var a={};a.mainlayer=this.node.getChildByName("ui_main"),a.chooselayer=this.node.getChildByName("ui_choose"),a.ranklayer=this.node.getChildByName("ui_rank"),a.storelayer=this.node.getChildByName("ui_store"),a.leveluplayer=this.node.getChildByName("ui_levelup"),this.showlayer=function(e){for(var t in a)a[t].active=t===e;e&&(a.mainlayer.active=!0);var i=a.chooselayer.active||a.ranklayer.active||a.storelayer.active||a.leveluplayer.active;WxSdk.setGameClubButton(!i)},this.showlayer("mainlayer"),a.mainlayer.getChildByName("btn_1").on("click",function(){showTishi("暂未开放")},this),a.mainlayer.getChildByName("btn_2").on("click",function(){this.showlayer("ranklayer")},this),a.mainlayer.getChildByName("btn_3").on("click",function(){this.showlayer("leveluplayer")},this),a.mainlayer.getChildByName("btn_4").on("click",function(){WxSdk.shareToWx(function(){})},this),a.mainlayer.getChildByName("btn_5").on("click",function(){},this),a.mainlayer.getChildByName("btn_6").on("click",function(){},this),a.mainlayer.getChildByName("btn_7").on("click",function(){},this),a.mainlayer.getChildByName("btn_8").on("click",function(){GameSet.isEndless=!0,WxSdk.setGameClubButton(!1),cc.director.loadScene("battle")},this),a.mainlayer.getChildByName("btn_9").on("click",function(){GameSet.isEndless=!1,showTishi("暂未开放")},this)},initMoreLayer:function(){var e=poolManager.getNode("prefab_more/ui_more");e.parent=this.node,e.active=!1;var r=cc.find("scroll/content",e);e.getChildByName("btn_back").on("click",function(){e.active=!1,WxSdk.setGameClubButton(!0),WxSdk.setBannerMain(!0)},this);var n=!1,i=function(){if(!n&&c.appPageInfo.list){n=!0;for(var e=c.appPageInfo.list,t=0;t<e.length;++t)if(e[t].appid===GameSet.appid){e.splice(t,1);break}var i=[];for(t=0;t<e.length;++t){var a=e[t];i.push(a.poster),i.push(a.qrcode)}console.log("load 1   "+Date.now()),cc.loader.load(i,function(e,t){if(e)for(var i=0;i<e.length;i++)cc.log("Error url ["+e[i]+"]: "+t.getError(e[i]));else if(console.log("load 2   "+Date.now()),c.appPageInfo.loadResults=t,r.isValid)for(i=0;i<c.appPageInfo.list.length;++i){var a=c.appPageInfo.list[i],n=new cc.Node("Button");n.qrcode=a.qrcode;var s=n.addComponent(cc.Sprite);n.addComponent(cc.Button);var o=c.appPageInfo.loadResults.getContent(a.poster);s.spriteFrame=new cc.SpriteFrame(o),r.addChild(n),n.on("click",function(e){var t=e.detail.node;WxSdk.previewImage(t.qrcode)},this)}})}};this.getMoreRes=function(){c.appPageInfo.loadResults?i():NHttp.getAppPageList(function(e,t){e||(c.appPageInfo.list=t.list,i())})},this.openMoreLayer=function(){e.active=!0,WxSdk.setGameClubButton(!1),WxSdk.setBannerMain(!1),i()}},onLogin:function(){var t=this;c.isLoginSuc?WxSdk.updateShareInfo():(WxSdk.showShareMenu(),WxSdk.loginWx(function(){NHttp.login(function(e){e||(c.isLoginSuc=!0,t.onLogin(),SubdomainSender.onLoginSuc())})}))},onLoad:function(){WxSdk.setGameClubButton(!0),WxSdk.setBannerMain(!0),this.initUi(),this.showlayer("mainlayer"),this.onLogin()},handIcon:function(){if(!this.btnHz){this.btnHz=cc.find("ui_main/btn_hz",this.node);var e=cc.rotateTo(.2,20),t=cc.rotateTo(.2,-20),i=cc.rotateTo(.2,20),a=cc.rotateTo(.2,0),n=cc.delayTime(3),s=cc.sequence(e,t,i,a,n);this.btnHz.runAction(cc.repeatForever(s))}var o=this.btnHz,r=function(){for(var e,t=Math.random(),i=0;i<c.gameInfo.ary2.length;++i)if(t<=c.gameInfo.ary2[i]){e=c.gameInfo.ary[i],o.sel=i;break}e&&cc.loader.load(e.icon,function(e,t){e||(console.log("Should load a texture from external url: "+(t instanceof cc.Texture2D)),o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))})};o.on("click",function(){var e=o.sel;WxSdk.previewImageHz(e,c.gameInfo.ary3),r()},this),c.gameInfo.ary&&(console.log("sisize:",cc.winSize.width,cc.winSize.height),r())},statics:{gameInfo:{},appPageInfo:{},isLoginSuc:!1},initPartner:function(){if(c.gameInfo.ary)this.handIcon();else{var o=this;NHttp.getAppHotList(function(e,t){if(!e){var i=t.list;c.gameInfo={};for(var a=0;a<i.length;++a)if(i[a].appid===GameSet.appid){i.splice(a,1);break}c.gameInfo.ary=i;var n=0;for(a=0;a<i.length;++a)n+=i[a].weight;if(c.gameInfo.ary2=[],c.gameInfo.ary3=[],0!==n){var s=0;for(a=0;a<i.length;++a)s+=i[a].weight/n,c.gameInfo.ary2[a]=s,c.gameInfo.ary3[a]=i[a].qrcode;o.handIcon()}}})}}});cc._RF.pop()},{}],MissileSprite:[function(e,t,i){"use strict";cc._RF.push(t,"0181fe0ttRK27ITqkxnn1sk","MissileSprite"),cc.Class({extends:cc.Component,properties:{},init:function(e,t,i,a){this.isMy=a,this.node.group=a?"zjdd":"djdd",this.atk=t,this.eeed=!1,this.direction=i,this.lived=!0,this.moveSpeed=0,this.moveSpeed1=e,this.moveSpeed2=.5*this.moveSpeed1,this.rotationRate=120,this.moveDistance=1.5*gameSize.def.height,this._mdis=0,this.isMissile=!0,BattleData.addBattleSprite(this),this.gw=[-3,-2],this.lived=!0,this.life=1},setUseFastFrame:function(e,t){if(e){if(!this.cbnormalFrame){var i=this.node.getComponent(cc.Sprite);this.cbnormalFrame=i.spriteFrame,i.spriteFrame=t}}else this.cbnormalFrame&&((i=this.node.getComponent(cc.Sprite)).spriteFrame=this.cbnormalFrame,this.cbnormalFrame=void 0)},onDestroy:function(){this.lived&&(this.lived=!1,BattleData.removeBattleSprite(this))},clrSprite:function(){this.lived&&(this.lived=!1,BattleData.removeBattleSprite(this),poolManager.putNode(this))},exeDie:function(e){e||playMissileExplode(this),this.clrSprite()},onLoad:function(){this.node.curjs=this},onCollisionEnter:function(e,t){if(this.lived){var i=e.node.curjs;i.lived&&(this.life-=i.atk,i.isLaster||(i.life-=this.atk,i.life<=0&&i.exeDie()),this.life<=0&&this.exeDie())}},runMoveTime:function(e){if(this.moveDistance<=0)this.exeDie(!0);else{this.gw[0]!==this.gw[1]?this.moveSpeed+=(this.moveSpeed1-this.moveSpeed)*e:this.moveSpeed>this.moveSpeed2&&(this.moveSpeed-=(this.moveSpeed-this.moveSpeed2)*e);var t=this.moveSpeed*e;if(this.moveDistance-=t,this._mdis+=t,100<this._mdis&&(this.targetObj&&this.targetObj.lived||(this.targetObj=BattleData.getOnePlane(this,1800)),this.targetObj&&this.targetObj.lived)){var i=this.node.getPosition(),a=this.targetObj.node.getPosition(),n=0<cc.pCross(this.direction,cc.pSub(a,i))?1:-1;this.gw[0]=this.gw[1],this.gw[1]=n;var s=-this.node.rotation+this.rotationRate*e*n;this.direction;this.direction=cc.pForAngle(s*cc.dwHudou),this.node.rotation=-s}this.node.x+=this.direction.x*t,this.node.y+=this.direction.y*t}},exeUpdate:function(e){this.runMoveTime(e)}}),cc._RF.pop()},{}],MusicManager:[function(e,t,i){"use strict";cc._RF.push(t,"6bf5fdAaZVE55idunE/1b+4","MusicManager"),t.exports=function(){window.MusicManager={init:function(){if(!this.isInit){this.isInit=!0,this.key="bg_music";var e=cc.sys.localStorage.getItem(this.key);e||(cc.sys.localStorage.setItem(this.key,"true"),e="true"),this.isPlayBgMusic="true"===e,this.click=function(){this.isPlayBgMusic=!this.isPlayBgMusic;var e=this.isPlayBgMusic?"true":"false";cc.sys.localStorage.setItem(this.key,e)},this.addBgMusic=function(){this.isaddbg||(this.isaddbg=!0,this.play("sound/bgm",!0,.2))}}},play:function(e,t,i){if(MusicManager.isPlayBgMusic){var a=cc.loader.getRes(e);a?cc.audioEngine.play(a,t,i):console.log("err music file no exist:"+e)}}},MusicManager.init()},cc._RF.pop()},{}],Plane:[function(e,t,i){"use strict";cc._RF.push(t,"67449mdh9pJMJ8wKux4uGV2","Plane"),cc.Class({extends:cc.Component,properties:{},exeDie:function(e){GameSet.isTest?this.life=500:e?this.clrSprite():(playPlaneExplode(this),this.node.dispatchEvent(new cc.Event.EventCustom("gameOver",!0)),this.node.parent=null)},preInit:function(){},init:function(){this.preInit(),this.isPlane=!0;var e=this.node.dd;this.isMy=e.isMy,this.node.group=this.isMy?"zj":"dj";var t=e.rotation;void 0===e.rotation&&(t=e.isMy?-90:90),this.node.rotation=t;var i=e.planeCfg;this.atk=i.damage,this.bulletAtk=i.atk,this.life=i.life,this.lifeMax=this.life,this.moveSpeed=i.speed,this.px=[],this.py=[],this.angle=[];for(var a=0;a<i.angle.length;++a)this.px[a]=i.px[a],this.py[a]=i.py[a],this.angle[a]=i.angle[a];if(this.cool=this.cool2=1/i.frequency,this.prefabzd=i.descData.prefabzd,this.bulletSpeed=i.bulletspeed,this.lived=!0,501===i.descData.id?this.node.scale=.8:601===i.descData.id&&(this.isIce=!0,this.retardRate=i.reduce),3===i.type&&(301===i.descData.id?this.isLaster=!0:401===i.descData.id&&(this.isLightning=!0)),(this.isLaster||this.isLightning)&&(this.laster=poolManager.getNode(this.prefabzd),this.laster.cool=this.cool,this.laster.scaleY=this.px[0]/50,this.laster.atk=this.bulletAtk,this.laster.parent=this.node.parent,this.laster.laster=this.isLaster,this.laster.lightning=this.isLightning,this.laster.rotation=this.node.rotation,this.laster.x=this.node.x,this.laster.y=this.node.y-30,this.laster.active=!1,this.laster.setLocalZOrder(3)),e.route&&(this.pathDex=0,this.route=clone(e.route.route),this.parsePath()),BattleData.addBattleSprite(this),this.ljAry=[],this.planeLjCfg=e.planeLjCfg,e.planeLjCfg)for(a=0;a<e.planeLjCfg.px.length;++a){var n=poolManager.getNode(e.planeLjCfg.descData.prefab);n.dd={isMy:e.isMy,planeCfg:e.planeLjCfg,dex:a,bulletSpeed:this.bulletSpeed},n.parent=this.node.parent,n.x=-1e4,n.setLocalZOrder(3),this.ljAry.push(n)}this.planeDaodanCfg=e.planeDaodanCfg,this.upFwq(0)},upFwq:function(e){this.fwqpx=[],this.fwqpy=[],this.fwqangle=[];var t=this.planeDaodanCfg;BattleData.fwqlv.change(e);var i=BattleData.fwqlv.get();if(i>t.maxlv&&(i=t.maxlv,BattleData.fwqlv.set(i)),t){var a=t.lvcfgAry[i];this.fwqcool=0,this.fwqcool2=1/a.frequency,this.fwqbulletAtk=a.atk,this.prefabfwq=t.descData.prefab;for(var n=0;n<a.angle.length;++n)this.fwqpx[n]=a.px[n],this.fwqpy[n]=a.py[n],this.fwqangle[n]=a.angle[n]}},updateLasterLv:function(e){var t=Math.floor(e/5);if(this.laster&&(this.laster.dex===t?t=-1:(this.laster.exeDie(!0),this.laster=null)),-1!==t){this.laster=poolManager.getNode("prefab/laser103"+t),this.laster.parent=this.node.parent,this.laster.dex=t,this.laster.x=this.node.x,this.laster.y=this.node.y;for(var i=0;i<this.weapons2.length;++i)if(this.weapons2[i]){this.laster.curjs.init(this.weapons2[i]);break}this.laster.curjs.setUseFastFrame(GameData.prop.fast.inUse,this.propBulletFrame)}var a=.5*Math.floor(e/5)+.5;this.laster.setScale(a),this.laster.curjs.updateLv(e)},onDestroy:function(){this.lived&&(this.lived=!1,BattleData.removeBattleSprite(this),this.laster&&(BattleData.removeBattleSprite(this.laster.curjs),this.laster=null))},clrSprite:function(){if(this.lived){this.lived=!1,this.laster;for(var e=0;e<this.ljAry.length;++e)this.ljAry[e].curjs.clrSprite();this.ljAry.length=0,BattleData.removeBattleSprite(this),this.node.destroy()}},usePropShield:function(){var e=cc.instantiate(cc.loader.getRes("prefab/propshield"));e.setPosition(0,0),e.parent=this.node,this.propShield=e},usePropBomb:function(){var e=cc.instantiate(cc.loader.getRes("prefab/propbomb"));e.setPosition(0,0),e.parent=this.node.parent},usePropFast:function(){var e=cc.instantiate(cc.loader.getRes("prefab/propFast"));e.setPosition(0,0),e.parent=this.node,this.propFast=e},toOtherNode:function(e){this.propShield&&this.propShield.isValid&&(this.propShield.parent=null,this.propShield.parent=e),this.propFast&&this.propFast.isValid&&(this.propFast.parent=null,this.propFast.parent=e)},onLoad:function(){this.node.curjs=this},onEnable:function(){this.lived||this.init()},onBuf:function(e){switch(e){case 20:this.usePropFast();break;case 21:this.usePropBomb();break;case 22:this.usePropShield();break;case 9:this.upFwq(1);break;case 10:BattleData.gold.change(1);break;case 11:this.node.dispatchEvent(new cc.Event.EventCustom("libao",!0));break;case 3:if(!GameData.planeLaser.inUse)break;case 0:case 1:case 2:this.planeCfgId===e?this.setPlaneLv(this.planeLv+1):this.node.parent.parent.curjs.changePlane(e)}},shootCheck:function(e){if(this.fwqcool+=e,this.fwqcool>=this.fwqcool2&&(this.fwqcool-=this.fwqcool2,this.shootfwq()),this.isLaster||this.isLightning)return this.laster.active=!0,this.laster.x=this.node.x,this.laster.y=this.node.y-30,void this.laster.curjs.exeUpdate(e);this.cool+=e,this.cool>=this.cool2&&(this.cool-=this.cool2,this.shoot())},shootfwq:function(){for(var e=-this.node.rotation*cc.dwHudou,t=cc.pForAngle(e),i=cc.pPerp(t),a=0;a<this.fwqangle.length;++a){var n=this.node.rotation,s=this.fwqangle[a]-n,o=(e=s*cc.dwHudou,cc.pForAngle(e)),r=this.fwqpx[a],c=this.fwqpy[a];r=t.x*c+i.x*r,c=t.y*c+i.y*r;var l=poolManager.getNode(this.prefabfwq);l.x=this.node.x+r,l.y=this.node.y+c,l.rotation=-s,l.parent=this.node.parent,l.curjs.init(this.bulletSpeed,this.fwqbulletAtk,o,this.isMy),l.setLocalZOrder(2)}},shoot:function(){for(var e=-this.node.rotation*cc.dwHudou,t=cc.pForAngle(e),i=cc.pPerp(t),a=0;a<this.angle.length;++a){var n=this.angle[a]-this.node.rotation,s=(e=n*cc.dwHudou,cc.pForAngle(e)),o=this.px[a],r=this.py[a],c=t.x*r+i.x*o,l=t.y*r+i.y*o,h=poolManager.getNode(this.prefabzd);!(h.isIce=!1)===this.isIce&&(h.isIce=!0,h.retardRate=this.retardRate),h.ready=!0,h.x=this.node.x+c,h.y=this.node.y+l,!0===this.isIce&&(h.ready=!1,h.x=this.node.x,h.y=this.node.y,h.mX=c),h.rotation=-n,h.parent=this.node.parent,h.curjs.init(this.bulletSpeed,this.bulletAtk,s,this.isMy),h.setLocalZOrder(2)}MusicManager.play("sound/shoot")},exeUpdate:function(e){this.shootCheck(e),BattleData.lifePercent=this.life/this.lifeMax;for(var t=0;t<this.ljAry.length;++t)this.ljAry[t].curjs.exeUpdate(e,this.node)}}),cc._RF.pop()},{}],PoolManager:[function(e,t,i){"use strict";cc._RF.push(t,"f324bxMaIZPqrmUjeEgTR5m","PoolManager"),t.exports=function(){window.poolManager=new function(){this.allNodePool={},this.allNodeRes={},this.getNode=function(e){var t=this.allNodePool[e];if(!t){t=this.allNodePool[e]=new cc.NodePool;var i=cc.loader.getRes(e);if(!i)return console.log("err poolManager.getNode   path no exist:"+e),null;this.allNodeRes[e]=i}var a=t.get();return a||((a=cc.instantiate(this.allNodeRes[e]))._pathStr=e),a.rotation=0,a},this.putNode=function(e){var t=e.node,i=t._pathStr;i?this.allNodePool[i].put(t):t.destroy()},this.putNode2=function(e){var t=e._pathStr;t?this.allNodePool[t].put(e):e.destroy()},this.clear=function(){for(var e in this.allNodePool)this.allNodePool[e].clear()}}},cc._RF.pop()},{}],Rank:[function(e,t,i){"use strict";cc._RF.push(t,"fdd40uz1odNPYIp5/BA7euA","Rank"),cc.Class({extends:cc.Component,properties:{display:cc.Sprite,s1:cc.SpriteFrame,s2:cc.SpriteFrame,s11:cc.SpriteFrame,s21:cc.SpriteFrame,s12:cc.SpriteFrame,s22:cc.SpriteFrame},onLoad:function(){this.tex=new cc.Texture2D;var t=this.node.getChildByName("b1"),i=this.node.getChildByName("b2"),e=this.node.getChildByName("b3"),a=this.node.getChildByName("b4"),n=this.node.getChildByName("b5");this.openRank=function(e){e?(SubdomainSender.openFriendRank(),i.getComponent(cc.Sprite).spriteFrame=this.s2,i.getChildByName("i").getComponent(cc.Sprite).spriteFrame=this.s22,t.getComponent(cc.Sprite).spriteFrame=this.s1,t.getChildByName("i").getComponent(cc.Sprite).spriteFrame=this.s11,SubdomainSender.openFriendRank()):(SubdomainSender.openWorldRank(),i.getComponent(cc.Sprite).spriteFrame=this.s1,i.getChildByName("i").getComponent(cc.Sprite).spriteFrame=this.s21,t.getComponent(cc.Sprite).spriteFrame=this.s2,t.getChildByName("i").getComponent(cc.Sprite).spriteFrame=this.s12)},this.openRank(!0),t.on("click",function(){this.openRank(!0)},this),i.on("click",function(){this.openRank(!1)},this),n.on("click",function(){SubdomainSender.openGroupRank(function(){})},this),e.on("click",function(){this.node.active=!1,SubdomainSender.closeRank()},this),a.on("click",function(){WxSdk.shareScreenshot(function(){})},this)},update:function(e){if(cc.sys.WECHAT_GAME===cc.sys.platform&&this.tex){var t=wx.getOpenDataContext().canvas;this.tex.initWithElement(t),this.tex.handleLoadedTexture(),this.display.spriteFrame=new cc.SpriteFrame(this.tex),this.displayscale||(this.displayscale=640/this.display.node.width),this.display.node.setScale(this.displayscale)}}}),cc._RF.pop()},{}],SubdomainSender:[function(e,t,i){"use strict";cc._RF.push(t,"f8d05lH2p1Bob4an35DLnY2","SubdomainSender"),t.exports=function(){window.subType={first3:0,friend:1,group:2,world:3,exit:100},window.SubdomainSender={rankWorldData:null,onLoginSuc:function(){if(!this.rankWorldData){var i=this;NHttp.getRank(0,function(e,t){e||(i.rankWorldData=t)})}},onSubdomainLoad:function(s){var o=[],r=null,e=function(t){s[t]||(s[t]=function(e){console.log("请定义"+t+"函数")})};for(var t in["showRank","showEnd","removeRank","onMainGameData","hideAll"])e(t);var a=function(e,i){i=i||0;var t=e.data,a=[];if(0===t.length)return a;a=[];for(var n=0;n<t.length;++n)void 0!==t[n].KVDataList[i]&&a.push(t[n]);return 0===a.length||(a.sort(function(e,t){return Number(t.KVDataList[i].value)-Number(e.KVDataList[i].value)}),a.splice(50)),a},c=function(e){if(e){var t=e.type,i=e.msg;switch(t){case subType.first3:wx.getFriendCloudStorage({keyList:["score1"],success:function(e){s.showEnd(a(e,0))},fail:function(e){console.log("拉取朋友数据失败 ",e)}});break;case subType.friend:wx.getFriendCloudStorage({keyList:["score1"],success:function(e){s.showRank(a(e,0))},fail:function(e){console.log("拉取朋友数据失败 ",e)}});break;case subType.group:wx.getGroupCloudStorage({keyList:["score1"],shareTicket:i,success:function(e){s.showRank(a(e,0))},fail:function(e){console.log("拉取群数据失败 ",e)}});break;case subType.world:s.showRank(i.ary,i.my)}}else s.removeRank()};wx.onMessage(function(e){var t=e.message;console.log("子域收到消息:",t);var i,a=JSON.parse(t),n=a.type;a.msg;switch(n){case subType.first3:case subType.friend:case subType.group:case subType.world:i=a,r&&r.page!==i.page&&(s.hideAll(),o.push(r)),c(r=i);break;case subType.exit:r=o.pop(),s.hideAll(),c(r);break;default:return void s.onMainGameData(a)}})},openFirst3Rank:function(){WxSdk.semdMsgToSubdomain(subType.first3,void 0,0)},openFriendRank:function(){WxSdk.semdMsgToSubdomain(subType.friend,void 0,1)},openGroupRank:function(t){WxSdk.shareToWxGroup(function(e){WxSdk.semdMsgToSubdomain(subType.group,e,1),t()})},openWorldRank:function(){if(this.rankWorldData){for(var e=[],t=0;t<this.rankWorldData.ranks.length;++t){var i=this.rankWorldData.ranks[t];e.push({nickname:i.nick,avatarUrl:i.avatar,KVDataList:[{value:i.score}]})}var a={nick:GameSet.userInfo.nickName,avatar:GameSet.userInfo.avatarUrl,score:GameData.score.get(),rank:this.rankWorldData.my_rank};WxSdk.semdMsgToSubdomain(subType.world,{ary:e,my:a},1)}},closeRank:function(){WxSdk.semdMsgToSubdomain(subType.exit)}}},cc._RF.pop()},{}],WxSdk:[function(e,t,i){"use strict";cc._RF.push(t,"b07faimOrhF5LgmBmJt/2pn","WxSdk"),t.exports=function(){window.WxSdk={},window.isWxPlatform=cc.sys.WECHAT_GAME===cc.sys.platform;try{wx.a}catch(e){isWxPlatform=!1}WxSdk.loginWx=function(i){if(isWxPlatform){var e=wx.getLaunchOptionsSync();GameSet.query=e.query,GameSet.shareTicket=e.shareTicket,console.log("游戏启动信息：",e);wx.login({success:function(t){wx.getUserInfo({success:function(e){GameSet.userInfo=e.userInfo,GameSet.userInfo.code=t.code,console.log("微信登录成功:",GameSet.userInfo),i&&i(!0)}})}})}},WxSdk.previewImage=function(e){if(isWxPlatform&&wx.previewImage){e=e||"http://cdn.batwan.cn/res/pickbox.jpg";wx.previewImage({current:e,urls:[e]})}},WxSdk.previewImageHz=function(e,t){isWxPlatform&&wx.previewImage&&wx.previewImage({current:t[e],urls:t})},WxSdk.isPlayVideo=!0,WxSdk.playVideoShop=function(e){var t=this;if(isWxPlatform){if(wx.createRewardedVideoAd){this._VideoShop||(this._VideoShop=wx.createRewardedVideoAd({adUnitId:"adunit-1827bc8c655b2e6c"}),this._VideoShop.onLoad(function(){console.log("激励视频 广告加载成功"),WxSdk.isPlayVideo=!0}),this._VideoShop.onClose(function(e){console.log("关闭视频广告 场景恢复"),WxSdk.isPlayVideo=!1,cc.director.resume(),WxSdk.setBannerMain(!0,!0),e&&e.isEnded||void 0===e?(console.log(" 正常播放结束，可以下发游戏奖励"),t._VideoShopCloseCall()):console.log("播放中途退出，不下发游戏奖励")}),this._VideoShop.onError(function(e){console.log(e.errMsg),WxSdk.isPlayVideo=!1,cc.director.resume(),console.log("视频广告错误 场景恢复"),WxSdk.setBannerMain(!0,!0),setTimeout(function(){WxSdk._VideoShop.load()},3e4)}),this._VideoShop.load()),console.log("场景暂停"),cc.director.pause(),WxSdk.setBannerMain(!1,!0),this._VideoShopCloseCall=e;var i=this._VideoShop;i.load().then(function(){return i.show()}).then(function(){return console.log("激励视频 广告显示")})}}else e()},WxSdk.initBanner=function(){if(!this.isInitBanner&&(this.isInitBanner=!0,isWxPlatform&&wx.createBannerAd)){var e=30,i=!1,t=this;setInterval(function(){i&&30<++e&&(e=0,t.changeBanner())},1e3);var a=350,n=null,s=wx.getSystemInfoSync(),o=2;"iPhone X"===s.model&&(o+=20),this.showBanner=function(e,t){i=e,n&&(i?(200<t&&a!==t&&(console.log("banner width:",t),a=t,n&&n.style&&(n.style.width=t)),n.show()):n.hide())},this.changeBanner=function(){n&&n.destroy(),(n=wx.createBannerAd({adUnitId:"adunit-ac9ad849cf8fb3db",style:{left:0,top:0,width:a}})).onResize(function(e){if(n&&n.style){n.style.left=.5*(s.windowWidth-e.width);var t=s.windowHeight-e.height-o;n.style.top=t,GameSet.down=-(t-.5*s.windowHeight)*s.pixelRatio*gameSize.scale+30,console.log(n.style.width,t,.5*s.windowHeight,gameSize.scale,GameSet.down)}}),n.show().then(function(){return console.log("banner 广告显示小")})}}},WxSdk.initBanner(),WxSdk.setBannerBattle=function(e,t){isWxPlatform&&wx.createBannerAd&&this.showBanner(e,300)},WxSdk.setBannerMain=function(e,t){isWxPlatform&&wx.createBannerAd&&this.showBanner(e,350)},WxSdk.setGameClubButton=function(e){if(isWxPlatform&&wx.createGameClubButton){var t=10;wx.getSystemInfoSync&&"iPhone X"===wx.getSystemInfoSync().model&&(t+=20),this.mGameClubButton||(this.mGameClubButton=wx.createGameClubButton({icon:"white",style:{left:10,top:t,width:25,height:25}})),e?this.mGameClubButton.show():this.mGameClubButton.hide()}},WxSdk.postUserRankInfoToCloudStorage=function(e){if(isWxPlatform){if(wx.setUserCloudStorage){var t={KVDataList:e,success:function(e){console.log(e)},fail:function(e){console.log(e)}};wx.setUserCloudStorage(t)}}else console.log(e)};var n=[];WxSdk.updateShareInfo=function(){0<n.length||NHttp.getAppShareInfo(function(e,t){if(!e&&t instanceof Array!=!1){for(var i=[],a=n.length=0;a<t.length;++a)i.push(t[a].img),n.push({url:t[a].img,str:t[a].title});cc.loader.load(i,function(e,t){console.log("load suc shareinfo---------------")})}})},WxSdk.getShareInfo=function(){var e=RandInt(0,n.length);return n[e]},WxSdk.showShareMenu=function(i){isWxPlatform&&wx.showShareMenu&&(wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(e){var t=WxSdk.getShareInfo();return{title:t.str,imageUrl:t.url,success:function(e){console.log(e),i&&i()},fail:function(e){console.log(e)}}}))},WxSdk.semdMsgToSubdomain=function(e,t,i){if(isWxPlatform&&wx.getOpenDataContext){var a=wx.getOpenDataContext();if(console.log(e),a){var n={type:e,msg:t,page:i};console.log(n),a.postMessage({message:JSON.stringify(n)})}}},WxSdk.shareToWxGroup=function(i){this.shareToWx(function(e){if(e){var t=e.shareTickets;t&&t[0]?i(!1,t[0]):i(!0)}})},WxSdk.vibrate=function(e,t){if(isWxPlatform&&wx.vibrateShort){var i={complete:function(){t&&t()}};e?wx.vibrateShort(i):wx.vibrateLong(i)}},WxSdk.shareToWx=function(t,e){if(isWxPlatform){if(wx.shareAppMessage){e=e||"a="+NHttp.uuid+"&b=0";var i=WxSdk.getShareInfo();wx.shareAppMessage({title:i.str,query:e,imageUrl:i.url,success:function(e){console.log(e),t&&t(e)},fail:function(e){console.log(e)}})}}else t({})},WxSdk.shareScreenshot=function(t){if(isWxPlatform){var e=cc.sys.windowPixelResolution.width,i=cc.sys.windowPixelResolution.height,a=gameSize.rel,n=gameSize.scale,s=(a.width,a.height/n),o=.5*(i-s);canvas.toTempFilePath({x:0,y:o,width:1.25*s,height:s,destWidth:e,destHeight:.8*e,success:function(e){console.log(e),wx.shareAppMessage({title:"看看我的排行帅吧",imageUrl:e.tempFilePath,success:function(e){console.log(e),t&&t(e)},fail:function(e){console.log(e)}})}}),isWxPlatform&&(wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0,success:function(e){console.log("setKeepScreenOn suc")},fail:function(e){console.log("setKeepScreenOn fail:"+e)}}),wx.onShow(function(e){console.log("++++++++++++++++++++++++++++++++++++游戏被显示+++++++++++++++++++++++++++++++++++++++"),console.log(e),GameSet.query=e.query,GameSet.shareTicket=e.shareTicket,WxSdk.loginWx(function(){NHttp.login(function(e){})})}))}else t({})}},cc._RF.pop()},{}],aniExplode:[function(e,t,i){"use strict";cc._RF.push(t,"5f723Ms/7JNiJIH5CUX0Xgx","aniExplode"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){(this.node.curjs=this).isExplode=!0;var e=this.node.getChildByName("i").getComponent(cc.Animation).play(),t=e.duration/e.speed;this.scheduleOnce(function(){this.node.destroy()},t)}}),cc._RF.pop()},{}],login:[function(e,t,i){"use strict";cc._RF.push(t,"2aef1iAgzdKJ4RsioblBfu5","login"),cc.Class({extends:cc.Component,properties:{_errcount:0,_isLoadsuc:!1,_ddt:10},onLoad:function(){this.lbInfo=this.node.getChildByName("info").getComponent(cc.Label),this.lbInfo.string="",this.loadResDir()},loadResDir:function(){try{var a=this,e=this.node.getChildByName("load");e.active=!0;var n=e.getChildByName("t").getComponent(cc.Label);cc.loader.loadResDir("",function(e,t,i){n.string=Math.ceil(100*e/t),a._jd=e},function(e,t,i){if(e&&a._errcount<10||0===t.length)return console.log("eeeeeeeeeeeeee:",a._errcount,e),this.lbInfo.string=JSON.stringify(e),a._errcount++,void a.loadResDir();a._isLoadsuc=!0})}catch(e){return void(this.lbInfo.string=e.stack)}},loadSuc:function(){e("GlobalHead")();try{MusicManager.addBgMusic()}catch(e){return void(this.lbInfo.string=e.stack)}try{GameData.onResourcesDirLoaded()}catch(e){return void(this.lbInfo.string=e.stack)}try{cc.director.loadScene("main")}catch(e){return void(this.lbInfo.string=e.stack)}},update:function(e){this._isLoadsuc&&(3<=this._ddt&&(this._ddt=0,this.loadSuc()),this._ddt+=e)}}),cc._RF.pop()},{GlobalHead:"GlobalHead"}],planeLj:[function(e,t,i){"use strict";cc._RF.push(t,"ac682Ja1HpJmr1Qw+41SV7/","planeLj"),cc.Class({extends:cc.Component,properties:{},init:function(){this.isPlane=!0;var e=this.node.dd;this.isMy=e.isMy;var t=e.planeCfg;this.bulletAtk=t.atk;var i=e.dex;this.px=t.px[i],this.py=t.py[i],this.angle=t.angle[i],this.cool=0,this.cool2=1/t.frequency,this.prefabzd=t.descData.prefabzd,this.bulletSpeed=e.bulletSpeed,this.lived=!0,this.isLaster&&this.updateLasterLv(GameData.planeLv)},updateLasterLv:function(e){var t=Math.floor(e/5);if(this.laster&&(this.laster.dex===t?t=-1:(this.laster.exeDie(!0),this.laster=null)),-1!==t){this.laster=poolManager.getNode("prefab/laser103"+t),this.laster.parent=this.node.parent,this.laster.dex=t,this.laster.x=this.node.x,this.laster.y=this.node.y;for(var i=0;i<this.weapons2.length;++i)if(this.weapons2[i]){this.laster.curjs.init(this.weapons2[i]);break}this.laster.curjs.setUseFastFrame(GameData.prop.fast.inUse,this.propBulletFrame)}var a=.5*Math.floor(e/5)+.5;this.laster.setScale(a),this.laster.curjs.updateLv(e)},clrSprite:function(){this.lived&&(this.laster&&(this.laster.curjs.exeDie(!0),this.laster=null),this.lived=!1,this.node.destroy())},onDestroy:function(){this.lived&&(this.lived=!1)},onLoad:function(){this.node.curjs=this},onEnable:function(){this.lived||this.init()},shootCheck:function(e){if(this.isLaster)return this.laster.x=this.node.x,this.laster.y=this.node.y,void this.laster.curjs.exeUpdate(e);this.cool+=e,this.cool>=this.cool2&&(this.cool-=this.cool2,this.shoot())},shoot:function(){var e=-this.node.rotation*cc.dwHudou,t=cc.pForAngle(e),i=this.node.x,a=this.node.y,n=poolManager.getNode(this.prefabzd);n.x=i,n.y=a,n.rotation=this.node.rotation,n.parent=this.node.parent,n.ljzd=!0,n.curjs.init(this.bulletSpeed,this.bulletAtk,t,this.isMy),n.setLocalZOrder(2)},exeUpdate:function(e,t){t&&(this.node.x=t.x+this.px,this.node.y=t.y+this.py,this.node.rotation=t.rotation),this.shootCheck(e)}}),cc._RF.pop()},{}],storeLayer:[function(e,t,i){"use strict";cc._RF.push(t,"2cdacwVXJJOMJjnuv2hKBwS","storeLayer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],tishi:[function(e,t,i){"use strict";cc._RF.push(t,"513e0+n1FlGvKpR9zgBbGUP","tishi"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=(this.node.curjs=this).node.getComponent(cc.Animation).play(),t=e.duration/e.speed;this.scheduleOnce(function(){this.node.destroy()},t),(this.node.curControl=this).node.x=.5*cc.winSize.width,this.node.y=.5*cc.winSize.height},setString:function(e){this.node.getChildByName("t").getComponent(cc.Label).string=e}}),cc._RF.pop()},{}]},{},["AutoPlane","BattleData","BattleLayer","Buf","BulletSprite","GameData","GameSet","GlobalHead","Help","Http","Laster","LevelUpLayer","LocalNum","Main","MissileSprite","MusicManager","Plane","PoolManager","Rank","SubdomainSender","WxSdk","aniExplode","login","planeLj","storeLayer","tishi"]);